<!DOCTYPE html>
<html>
<head>
  <title>My First Web AR</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <!-- Gesture & Mouse Controls -->
  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

  <!-- Gesture Component -->
  <script>
    AFRAME.registerComponent("gesture-handler", {
      schema: {
        enabled: { default: true }
      },
      init: function () {
        this.handleScale = this.handleScale.bind(this);
        this.handleRotation = this.handleRotation.bind(this);

        this.el.sceneEl.addEventListener("twofingermove", this.handleScale);
        this.el.sceneEl.addEventListener("onefingermove", this.handleRotation);
      },

      handleScale: function (event) {
        let scale = this.el.object3D.scale;
        let newScale = scale.x + event.detail.spreadChange / 200;
        newScale = Math.min(Math.max(newScale, 0.02), 2);
        scale.set(newScale, newScale, newScale);
      },

      handleRotation: function (event) {
        this.el.object3D.rotation.y += event.detail.positionChange.x / 100;
      }
    });
  </script>

</head>

<body style="margin:0; overflow:hidden;">
  <a-scene embedded arjs>

    <a-marker preset="hiro">
      <a-gltf-model 
        src="models/model.glb"
        position="0 0 0"
        scale="0.075 0.075 0.075"
        gesture-handler>
      </a-gltf-model>
    </a-marker>

    <a-entity camera></a-entity>

  </a-scene>
</body>
</html>
